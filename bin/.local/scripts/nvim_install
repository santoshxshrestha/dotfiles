#!/usr/bin/env bash
# ANSI color codes
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Ensure the script runs with root privileges
if [[ $EUID -ne 0 ]]; then
    echo -e "${RED}Please run as root: sudo $0{NC}"
    exit 1
fi

echo -e "${RED}Error:${NC} Dang you already gave me sudo permission !!!"
sleep 2
echo -e "${GREEN}I won't do that bad.{NC}"
sleep 2
# Define the list of packages
packages=(
    fastfetch
    git
    nodejs
    npm
    gcc
    python3
    neovim
    stow
    tmux
    unzip
    wget
    ripgrep
    ruby
    luarocks
    python-pip
    php
    cargo
    xclip
    lazygit
    tree-sitter
    shellcheck
)

# Install packages using pacman arch by the way ..
echo -e "${BLUE}Info:${NC} Installing packages..."

pacman -S --noconfirm "${packages[@]}"

cd "$HOME" || echo -e "${RED}Error:${NC}Failed to navigate to home directory.\n${BLUE}Info:${NC}aborting...\n" && sleep 2 && return

echo -e "${BLUE}Cloning:${NC} The tmux plugin manager that you gonna use ..." && sleep 2
git clone https://github.com/tmux-plugins/tpm "$HOME/.tmux/plugins/tpm"

# Clone dotfiles repository
cd echo -e "${RED} Error:${NC} Failed to navigate to home directory.\n${BLUE}Info:${NC}aborting...\n" && sleep 2 && return

echo -e "${BLUE}Cloning:${NC} Dotfiles form main branch..."
git clone --depth=1 -b main https://github.com/SantoshShrestha11/dotfiles.git "$HOME/dotfiles/"

# Stow the dotfiles
cd "$HOME/dotfiles" || echo -e "${BLUE}Error:${NC} Failed to navigate to dotfiles directory.\n${BLUE}Info:${NC}aborting...\n" && sleep 2 && return
echo -e "Stowing dotfiles..."
stow nvim tmux fastfetch

# This package (neovim on npm) is a Node.js client for Neovimâ€™s RPC API.
#It allows Node.js applications (like Neovim plugins) to send commands and interact with Neovim.
npm install -g neovim

fastfetch
sleep 2
echo -e "${GREEN}Setup complete!"
