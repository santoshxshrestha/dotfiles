#!/usr/bin/env bash

# Ensure the script runs with root privileges
if [[ $EUID -ne 0 ]]; then
    echo "Please run as root: sudo $0"
    exit 1
fi

echo "Dang you already gave me sudo permission !!!"
sleep 2
echo "I won't do that bad."
sleep 2
# Define the list of packages
packages=(
    fastfetch
    git
    nodejs
    npm
    gcc
    python3
    neovim
    stow
    tmux
    unzip
    wget
    ripgrep
    ruby
    luarocks
    python-pip
    php
    cargo
    xclip
    lazygit
    tree-sitter
    shellcheck
)

# Install packages using pacman arch by the way ..
echo "Installing packages..."

pacman -S --noconfirm "${packages[@]}"

cd $HOME

echo "Cloning the tmux plugin manager that you gonna use ..."
git clone https://github.com/tmux-plugins/tpm $HOME/.tmux/plugins/tpm

# Clone dotfiles repository
cd $HOME
echo "Cloning dotfiles form main branch..."
git clone --depth=1 -b main https://github.com/SantoshShrestha11/dotfiles.git $HOME/dotfiles/

# Stow the dotfiles
cd $HOME/dotfiles || exit
echo "Stowing dotfiles..."
stow nvim tmux fastfetch

# This package (neovim on npm) is a Node.js client for Neovimâ€™s RPC API.
#It allows Node.js applications (like Neovim plugins) to send commands and interact with Neovim.
npm install -g neovim

fastfetch
echo "Setup complete!"
